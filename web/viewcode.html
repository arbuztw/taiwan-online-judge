<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js"></script>

<script type="text/javascript" src="http://codemirror.net/lib/codemirror.js"></script>
<link rel="stylesheet" href="http://codemirror.net/lib/codemirror.css">
<link rel="stylesheet" href="http://codemirror.net/theme/lesser-dark.css">
<script type="text/javascript" src="http://codemirror.net/mode/clike/clike.js"></script>

<script type="text/javascript" src="nor.js"></script>
<link rel=stylesheet type="text/css" href="nor.css">

<script type="text/javascript">
function init(){
    var submitid;

    submitid = nor_getparam().submitid;

    new Ajax.Request('status_viewcode.php',{
	method:'post',
	parameters:{'submitid':submitid},
	onSuccess:function(transport){
	    var res;
	    var code;
	    var e_codemirror;

	    res = transport.responseText;
	    if(res[0] == 'E'){
		code = '錯誤';
	    }else{
		code = JSON.parse(res).code;
	    }

	    e_codemirror = CodeMirror(document.body,{
		mode:'text/x-c++src',
		theme:'lesser-dark',
		lineNumbers:true,
		matchBrackets:true,
		indentUnit:4,
		value:code
	    });

	    e_codemirror.getWrapperElement().style.width = '100%';
	    e_codemirror.getWrapperElement().style.height = '100%';
	    e_codemirror.getScrollerElement().style.width = '100%';
	    e_codemirror.getScrollerElement().style.height = '100%';
	}
    });
}
</script>
</head>
<body style="width:100%; height:100%; margin:0px 0px;" onload='init();'></body>
</html>

